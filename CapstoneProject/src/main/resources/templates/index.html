<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:fragment="header (pageTitle)">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="UTF-8" />
	<title th:text="${pageTitle}">Home</title>
	<link th:href="@{/css/styles.css}" rel="stylesheet">
	<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous">
	<script src='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
	<link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' />
	<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.2.0/mapbox-gl-geocoder.min.js'></script>
	<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.2.0/mapbox-gl-geocoder.css' type='text/css' />
</head>
<body>

	<input type="hidden" id="geocoder" th:value="${geocoder}">
	<input type="hidden" id="shopNames" th:value="${shopNames}">
	<input type="hidden" id="shopIDs" th:value="${shopIDs}">
	
	
	<div id="LayoutHeaders">
		<h1>localFix</h1>	
		<h2>Search for a Shop by entering your device</h2>
	</div>

	<!-- Map Initilization and Control -->
	<div class='sidebar'>
		<div class='heading'>
			<h1>Locations</h1>
		</div>
		<div id='listings' class='listings'></div>
	</div>
	
	<div id='map' class='map pad2' style='width: 800px; height: 400px;'>Map</div>
	
	<form id='search' action="#" th:action="@{/search}">
		Search: <input type="text" name="search">
	</form>
	
	<div id="results" th:each="shop : ${results}">
		<span th:text="${shop.name}"></span><br>
		<span th:text="${shop.address.street}"></span><br>
		<span th:text="${shop.address.city}"></span><br>
		<span th:text="${shop.address.province}"></span><br>
		<span th:text="${shop.address.postal}"></span><br>
		
		<div th:each="brand : ${shop.brands}">
			<span th:text="${brand.brandName}"></span><br>
		</div>
		<br>
	</div>
	
	<footer th:fragment="footer">
		<div>
			<a href="/" th:href="@{/}">Home</a> ||
			<a href="/goRegisterCustomer" th:href="@{/goRegisterCustomer}">Register Customer</a> ||
			<a href="/goRegisterOwner" th:href="@{/goRegisterOwner}">Register Shop Owner</a> ||
			<a href="/viewAccount" th:href="@{/viewAccount}">View Account</a>
		</div>
	</footer>
<script th:inline="javascript">
	var shopNames = document.getElementById('shopNames').value;
	var shopIDs = document.getElementById('shopIDs').value;
</script>
<script src="../static/js/mapControl.js" th:src="@{/js/mapControl.js}"></script>
</body>
</html>
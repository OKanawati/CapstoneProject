<!DOCTYPE html>
<html xmlns:th="https://www.thymeLeaf.org">
<head th:include="index.html :: header (pageTitle='Account Information')">
</head>
<body>
	<div id="LayoutHeaders">
		<h1 style="background-color: red; color: white;">ACCOUNT INFORMATION</h1>
	</div>
	<div id="AccountInformation">
		<h2>Welcome, [[${owner.firstName}]]</h2>
			Name: <span>[[${owner.firstName}]] [[${owner.lastName}]]</span><br>
			Email: <span th:text="${owner.email}"></span><br>
	</div>
	<br>
	
<!-- 	View the list of registered shops belonging to the owner logged in -->
	<div>
		<h3>Registered Shops</h3>
			<div th:if="${not #lists.isEmpty(owner.shopList)}">
				<table border=1 class="account">
					<tr>
						<th>Name</th>
						<th>Phone</th>
						<th>Address</th>
						<th>Supported Brands</th>
					</tr>
					<tr th:each="shop : ${owner.shopList}">
						<td th:text="${shop.name}"></td>
						<td th:text="${shop.phoneNumber}"></td>
						<td rowspan=4>
							<span th:text="${shop.address.street}"></span><br>
							<span th:text="${shop.address.city}"></span><br>
							<span th:text="${shop.address.province}"></span><br>
							<span th:text="${shop.address.postal}"></span>
						</td>
						<td>
							<span th:each="brand : ${shop.brands}">
								<span th:text="${brand.brandName}"></span><br>
							</span>
						</td>
					</tr>
				</table>
				
				<h3>Appointments</h3>
				<div th:each="shop : ${owner.shopList}">
					<div th:if="${not #lists.isEmpty(shop.appointments)}">
						<table border=1 class="account">
							<tr>
								<th colspan=2>Name</th>
								<th>Email</th>
								<th>Date</th>
								<th>Time</th>
								<th>Device</th>
								<th>Service Details</th>
								<th>Status</th>
								<th colspan=2>Action</th>
							</tr>
							<tr th:each="appointment : ${shop.appointments}">
								<td th:text="${appointment.custFirstName}"></td>
								<td th:text="${appointment.custLastName}"></td> 
								<td th:text="${appointment.custEmail}"></td>
								<td th:text="${appointment.date}"></td>
								<td th:text="${appointment.time}"></td>
								<td th:text="${appointment.deviceBrand}"></td>
								<td th:text="${appointment.serviceDetails}"></td>
								<td th:text="${appointment.status}"></td>
								<td><button>CONFIRM</button></td>
								<td><button>DENY</button>
							</tr>
						</table>
					</div>
					<div th:unless="${not #lists.isEmpty(shop.appointments)}">
						<span>No appointments scheduled</span>
					</div>
					<br>
				</div>
			</div>
			<div th:unless="${not #lists.isEmpty(owner.shopList)}">
				<span>No shops registered</span>			
			</div>
			<br>
			<a href="/goRegisterShop" th:href="@{/goRegisterShop}">Add Shop</a>
			<br>
			<br>	
			<form action="#" th:action="@{/logout}" method="post">
				<div class='logout'>
					<input type="submit" value="Logout" class="pure-button pure-button-primary">
				</div>
			</form>
			<br>
			<br>
			<br>
			<br>	
	</div>
	
	
	<footer th:insert="index.html :: footer"></footer>
</body>
</html>